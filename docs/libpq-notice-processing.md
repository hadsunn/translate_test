[ ![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png) ](/)

  * [Home](/ "Home")
  * [About](/about/ "About")
  * [Download](/download/ "Download")
  * [Documentation](/docs/ "Documentation")
  * [Community](/community/ "Community")
  * [Developers](/developer/ "Developers")
  * [Support](/support/ "Support")
  * [Donate](/about/donate/ "Donate")
  * [Your account](/account/ "Your account")

__

May 8, 2025: [ PostgreSQL 17.5, 16.9, 15.13, 14.18, and 13.21 Released! ](/about/news/postgresql-175-169-1513-1418-and-1321-released-3072/) | [ PostgreSQL 18 Beta 1 Released! ](/about/news/postgresql-18-beta-1-released-3070/)

[Documentation](/docs/ "Documentation") -> [PostgreSQL
16](/docs/16/index.html)

Supported Versions: [Current](/docs/current/libpq-notice-processing.html
"PostgreSQL 17 - 34.13. Notice Processing") ([17](/docs/17/libpq-notice-
processing.html "PostgreSQL 17 - 34.13. Notice Processing")) /
[16](/docs/16/libpq-notice-processing.html "PostgreSQL 16 - 34.13. Notice
Processing") / [15](/docs/15/libpq-notice-processing.html "PostgreSQL 15 -
34.13. Notice Processing") / [14](/docs/14/libpq-notice-processing.html
"PostgreSQL 14 - 34.13. Notice Processing") / [13](/docs/13/libpq-notice-
processing.html "PostgreSQL 13 - 34.13. Notice Processing")

Development Versions: [18](/docs/18/libpq-notice-processing.html "PostgreSQL
18 - 34.13. Notice Processing") / [devel](/docs/devel/libpq-notice-
processing.html "PostgreSQL devel - 34.13. Notice Processing")

Unsupported versions: [12](/docs/12/libpq-notice-processing.html "PostgreSQL
12 - 34.13. Notice Processing") / [11](/docs/11/libpq-notice-processing.html
"PostgreSQL 11 - 34.13. Notice Processing") / [10](/docs/10/libpq-notice-
processing.html "PostgreSQL 10 - 34.13. Notice Processing") /
[9.6](/docs/9.6/libpq-notice-processing.html "PostgreSQL 9.6 - 34.13. Notice
Processing") / [9.5](/docs/9.5/libpq-notice-processing.html "PostgreSQL 9.5 -
34.13. Notice Processing") / [9.4](/docs/9.4/libpq-notice-processing.html
"PostgreSQL 9.4 - 34.13. Notice Processing") / [9.3](/docs/9.3/libpq-notice-
processing.html "PostgreSQL 9.3 - 34.13. Notice Processing") /
[9.2](/docs/9.2/libpq-notice-processing.html "PostgreSQL 9.2 - 34.13. Notice
Processing") / [9.1](/docs/9.1/libpq-notice-processing.html "PostgreSQL 9.1 -
34.13. Notice Processing") / [9.0](/docs/9.0/libpq-notice-processing.html
"PostgreSQL 9.0 - 34.13. Notice Processing") / [8.4](/docs/8.4/libpq-notice-
processing.html "PostgreSQL 8.4 - 34.13. Notice Processing") /
[8.3](/docs/8.3/libpq-notice-processing.html "PostgreSQL 8.3 - 34.13. Notice
Processing") / [8.2](/docs/8.2/libpq-notice-processing.html "PostgreSQL 8.2 -
34.13. Notice Processing") / [8.1](/docs/8.1/libpq-notice-processing.html
"PostgreSQL 8.1 - 34.13. Notice Processing") / [8.0](/docs/8.0/libpq-notice-
processing.html "PostgreSQL 8.0 - 34.13. Notice Processing") /
[7.4](/docs/7.4/libpq-notice-processing.html "PostgreSQL 7.4 - 34.13. Notice
Processing")

__

34.13. Notice Processing  
---  
[Prev](libpq-misc.html "34.12. Miscellaneous Functions")  | [Up](libpq.html "Chapter 34. libpq — C Library") | Chapter 34. libpq — C Library | [Home](index.html "PostgreSQL 16.9 Documentation") |  [Next](libpq-events.html "34.14. Event System")  
  
* * *

## 34.13. Notice Processing #

Notice and warning messages generated by the server are not returned by the
query execution functions, since they do not imply failure of the query.
Instead they are passed to a notice handling function, and execution continues
normally after the handler returns. The default notice handling function
prints the message on `stderr`, but the application can override this behavior
by supplying its own handling function.

For historical reasons, there are two levels of notice handling, called the
notice receiver and notice processor. The default behavior is for the notice
receiver to format the notice and pass a string to the notice processor for
printing. However, an application that chooses to provide its own notice
receiver will typically ignore the notice processor layer and just do all the
work in the notice receiver.

The function `PQsetNoticeReceiver` sets or examines the current notice
receiver for a connection object. Similarly, `PQsetNoticeProcessor` sets or
examines the current notice processor.

    
    
    typedef void (*PQnoticeReceiver) (void *arg, const PGresult *res);
    
    PQnoticeReceiver
    PQsetNoticeReceiver(PGconn *conn,
                        PQnoticeReceiver proc,
                        void *arg);
    
    typedef void (*PQnoticeProcessor) (void *arg, const char *message);
    
    PQnoticeProcessor
    PQsetNoticeProcessor(PGconn *conn,
                         PQnoticeProcessor proc,
                         void *arg);
    

Each of these functions returns the previous notice receiver or processor
function pointer, and sets the new value. If you supply a null function
pointer, no action is taken, but the current pointer is returned.

When a notice or warning message is received from the server, or generated
internally by libpq, the notice receiver function is called. It is passed the
message in the form of a `PGRES_NONFATAL_ERROR` `PGresult`. (This allows the
receiver to extract individual fields using [`PQresultErrorField`](libpq-
exec.html#LIBPQ-PQRESULTERRORFIELD), or obtain a complete preformatted message
using [`PQresultErrorMessage`](libpq-exec.html#LIBPQ-PQRESULTERRORMESSAGE) or
[`PQresultVerboseErrorMessage`](libpq-exec.html#LIBPQ-
PQRESULTVERBOSEERRORMESSAGE).) The same void pointer passed to
`PQsetNoticeReceiver` is also passed. (This pointer can be used to access
application-specific state if needed.)

The default notice receiver simply extracts the message (using
[`PQresultErrorMessage`](libpq-exec.html#LIBPQ-PQRESULTERRORMESSAGE)) and
passes it to the notice processor.

The notice processor is responsible for handling a notice or warning message
given in text form. It is passed the string text of the message (including a
trailing newline), plus a void pointer that is the same one passed to
`PQsetNoticeProcessor`. (This pointer can be used to access application-
specific state if needed.)

The default notice processor is simply:

    
    
    static void
    defaultNoticeProcessor(void *arg, const char *message)
    {
        fprintf(stderr, "%s", message);
    }
    

Once you have set a notice receiver or processor, you should expect that that
function could be called as long as either the `PGconn` object or `PGresult`
objects made from it exist. At creation of a `PGresult`, the `PGconn`'s
current notice handling pointers are copied into the `PGresult` for possible
use by functions like [`PQgetvalue`](libpq-exec.html#LIBPQ-PQGETVALUE).

* * *

[Prev](libpq-misc.html "34.12. Miscellaneous Functions")  | [Up](libpq.html "Chapter 34. libpq — C Library") |  [Next](libpq-events.html "34.14. Event System")  
---|---|---  
34.12. Miscellaneous Functions  | [Home](index.html "PostgreSQL 16.9 Documentation") |  34.14. Event System  
  
## Submit correction

If you see anything in the documentation that is not correct, does not match
your experience with the particular feature or requires further clarification,
please use [this form](/account/comments/new/16/libpq-notice-processing.html/)
to report a documentation issue.

[Privacy Policy](/about/privacypolicy) | [Code of Conduct](/about/policies/coc/) | [About PostgreSQL](/about/) | [Contact](/about/contact/)  

Copyright (C) 1996-2025 The PostgreSQL Global Development Group

