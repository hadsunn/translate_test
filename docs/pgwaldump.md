[ ![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png) ](/)

  * [Home](/ "Home")
  * [About](/about/ "About")
  * [Download](/download/ "Download")
  * [Documentation](/docs/ "Documentation")
  * [Community](/community/ "Community")
  * [Developers](/developer/ "Developers")
  * [Support](/support/ "Support")
  * [Donate](/about/donate/ "Donate")
  * [Your account](/account/ "Your account")

__

May 8, 2025: [ PostgreSQL 17.5, 16.9, 15.13, 14.18, and 13.21 Released! ](/about/news/postgresql-175-169-1513-1418-and-1321-released-3072/) | [ PostgreSQL 18 Beta 1 Released! ](/about/news/postgresql-18-beta-1-released-3070/)

[Documentation](/docs/ "Documentation") -> [PostgreSQL
16](/docs/16/index.html)

Supported Versions: [Current](/docs/current/pgwaldump.html "PostgreSQL 17 -
pg_waldump") ([17](/docs/17/pgwaldump.html "PostgreSQL 17 - pg_waldump")) /
[16](/docs/16/pgwaldump.html "PostgreSQL 16 - pg_waldump") /
[15](/docs/15/pgwaldump.html "PostgreSQL 15 - pg_waldump") /
[14](/docs/14/pgwaldump.html "PostgreSQL 14 - pg_waldump") /
[13](/docs/13/pgwaldump.html "PostgreSQL 13 - pg_waldump")

Development Versions: [18](/docs/18/pgwaldump.html "PostgreSQL 18 -
pg_waldump") / [devel](/docs/devel/pgwaldump.html "PostgreSQL devel -
pg_waldump")

Unsupported versions: [12](/docs/12/pgwaldump.html "PostgreSQL 12 -
pg_waldump") / [11](/docs/11/pgwaldump.html "PostgreSQL 11 - pg_waldump") /
[10](/docs/10/pgwaldump.html "PostgreSQL 10 - pg_waldump")

__

pg_waldump  
---  
[Prev](pgupgrade.html "pg_upgrade")  | [Up](reference-server.html "PostgreSQL Server Applications") | PostgreSQL Server Applications | [Home](index.html "PostgreSQL 16.9 Documentation") |  [Next](app-postgres.html "postgres")  
  
* * *

## pg_waldump

pg_waldump — display a human-readable rendering of the write-ahead log of a
PostgreSQL database cluster

## Synopsis

`pg_waldump` [`option`...] [`startseg` [`endseg`]]

## Description

`pg_waldump` displays the write-ahead log (WAL) and is mainly useful for
debugging or educational purposes.

This utility can only be run by the user who installed the server, because it
requires read-only access to the data directory.

## Options

The following command-line options control the location and format of the
output:

_`startseg`_

    

Start reading at the specified WAL segment file. This implicitly determines
the path in which files will be searched for, and the timeline to use.

_`endseg`_

    

Stop after reading the specified WAL segment file.

`-b`  
`--bkp-details`

    

Output detailed information about backup blocks.

`-B _`block`_`  
`--block=_`block`_`

    

Only display records that modify the given block. The relation must also be
provided with `--relation` or `-R`.

`-e _`end`_`  
`--end=_`end`_`

    

Stop reading at the specified WAL location, instead of reading to the end of
the log stream.

`-f`  
`--follow`

    

After reaching the end of valid WAL, keep polling once per second for new WAL
to appear.

`-F _`fork`_`  
`--fork=_`fork`_`

    

If provided, only display records that modify blocks in the given fork. The
valid values are `main` for the main fork, `fsm` for the free space map, `vm`
for the visibility map, and `init` for the init fork.

`-n _`limit`_`  
`--limit=_`limit`_`

    

Display the specified number of records, then stop.

`-p _`path`_`  
`--path=_`path`_`

    

Specifies a directory to search for WAL segment files or a directory with a
`pg_wal` subdirectory that contains such files. The default is to search in
the current directory, the `pg_wal` subdirectory of the current directory, and
the `pg_wal` subdirectory of `PGDATA`.

`-q`  
`--quiet`

    

Do not print any output, except for errors. This option can be useful when you
want to know whether a range of WAL records can be successfully parsed but
don't care about the record contents.

`-r _`rmgr`_`  
`--rmgr=_`rmgr`_`

    

Only display records generated by the specified resource manager. You can
specify the option multiple times to select multiple resource managers. If
`list` is passed as name, print a list of valid resource manager names, and
exit.

Extensions may define custom resource managers, but pg_waldump does not load
the extension module and therefore does not recognize custom resource managers
by name. Instead, you can specify the custom resource managers as `custom###`
where "`###`" is the three-digit resource manager ID. Names of this form will
always be considered valid.

`-R _`tblspc`_ /_`db`_ /_`rel`_`  
`--relation=_`tblspc`_ /_`db`_ /_`rel`_`

    

Only display records that modify blocks in the given relation. The relation is
specified with tablespace OID, database OID, and relfilenode separated by
slashes, for example `1234/12345/12345`. This is the same format used for
relations in the program's output.

`-s _`start`_`  
`--start=_`start`_`

    

WAL location at which to start reading. The default is to start reading the
first valid WAL record found in the earliest file found.

`-t _`timeline`_`  
`--timeline=_`timeline`_`

    

Timeline from which to read WAL records. The default is to use the value in
_`startseg`_ , if that is specified; otherwise, the default is 1. The value
can be specified in decimal or hexadecimal, for example `17` or `0x11`.

`-V`  
`--version`

    

Print the pg_waldump version and exit.

`-w`  
`--fullpage`

    

Only display records that include full page images.

`-x _`xid`_`  
`--xid=_`xid`_`

    

Only display records marked with the given transaction ID.

`-z`  
`--stats[=record]`

    

Display summary statistics (number and size of records and full-page images)
instead of individual records. Optionally generate statistics per-record
instead of per-rmgr.

If pg_waldump is terminated by signal SIGINT (**Control** +**C**), the summary
of the statistics computed is displayed up to the termination point. This
operation is not supported on Windows.

`--save-fullpage=_`save_path`_`

    

Save full page images found in the WAL records to the _`save_path`_ directory.
The images saved are subject to the same filtering and limiting criteria as
the records displayed.

The full page images are saved with the following file name format:
`_`TIMELINE`_ -_`LSN`_._`RELTABLESPACE`_._`DATOID`_._`RELNODE`_._`BLKNO`_
__`FORK`_` The file names are composed of the following parts:

Component | Description  
---|---  
TIMELINE | The timeline of the WAL segment file where the record is located formatted as one 8-character hexadecimal number `%08X`  
LSN | The LSN of the record with this image, formatted as two 8-character hexadecimal numbers `%08X-%08X`  
RELTABLESPACE | tablespace OID of the block  
DATOID | database OID of the block  
RELNODE | filenode of the block  
BLKNO | block number of the block  
FORK | The name of the fork the full page image came from, such as `main`, `fsm`, `vm`, or `init`.  
  
`-?`  
`--help`

    

Show help about pg_waldump command line arguments, and exit.

## Environment

`PGDATA`

    

Data directory; see also the `-p` option.

`PG_COLOR`

    

Specifies whether to use color in diagnostic messages. Possible values are
`always`, `auto` and `never`.

## Notes

Can give wrong results when the server is running.

Only the specified timeline is displayed (or the default, if none is
specified). Records in other timelines are ignored.

pg_waldump cannot read WAL files with suffix `.partial`. If those files need
to be read, `.partial` suffix needs to be removed from the file name.

## See Also

[Section 30.6](wal-internals.html "30.6. WAL Internals")

* * *

[Prev](pgupgrade.html "pg_upgrade")  | [Up](reference-server.html "PostgreSQL Server Applications") |  [Next](app-postgres.html "postgres")  
---|---|---  
pg_upgrade  | [Home](index.html "PostgreSQL 16.9 Documentation") |  postgres  
  
## Submit correction

If you see anything in the documentation that is not correct, does not match
your experience with the particular feature or requires further clarification,
please use [this form](/account/comments/new/16/pgwaldump.html/) to report a
documentation issue.

[Privacy Policy](/about/privacypolicy) | [Code of Conduct](/about/policies/coc/) | [About PostgreSQL](/about/) | [Contact](/about/contact/)  

Copyright (C) 1996-2025 The PostgreSQL Global Development Group

